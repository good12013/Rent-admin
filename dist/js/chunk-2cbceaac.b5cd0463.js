(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2cbceaac"],{"26f1":function(e,t,o){"use strict";o.r(t);var n=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("a-card",{attrs:{bordered:!1}},[o("s-table",{ref:"table",attrs:{size:"default","row-key":function(e){return e.eid},columns:e.columns,data:e.loadData,showPagination:!1},scopedSlots:e._u([{key:"price",fn:function(t){return[e._v(e._s(e._f("PriceFormat")(t)))]}},{key:"content",fn:function(t){return[o("ellipsis",{attrs:{length:30,tooltip:""}},[e._v(e._s(t))])]}},{key:"create_time",fn:function(t){return[e._v(e._s(e._f("DateFormat")(1e3*t,"YYYY-MM-DD HH:mm"))+"\n        ")]}},{key:"action",fn:function(t,n){return o("span",{},[[o("div",[o("a",{on:{click:function(t){return e.checkDetail(n)}}},[e._v("check detail")])])]],2)}}])}),o("a-modal",{attrs:{title:"SendEmail",width:800},on:{ok:e.sureSendEmail},model:{value:e.visible,callback:function(t){e.visible=t},expression:"visible"}},[o("a-form",{attrs:{form:e.sendEmailInfo}},[o("a-form-item",{attrs:{"label-col":e.labelCol,"wrapper-col":e.wrapperCol,label:"ShopName"}},[o("span",[e._v(e._s(e.sendEmailInfo.shopName))])]),o("a-form-item",{attrs:{"label-col":e.labelCol,"wrapper-col":e.wrapperCol,label:"WeekTime"}},[o("el-date-picker",{staticClass:"value-info",staticStyle:{width:"280px",height:"40px","margin-left":"15px"},attrs:{type:"week",placeholder:"choose a week",format:"yyyy-MM-dd","value-format":"yyyy-MM-ddT00:00:00+08:00"},model:{value:e.sendEmailInfo.chooseWeekTime,callback:function(t){e.$set(e.sendEmailInfo,"chooseWeekTime",t)},expression:"sendEmailInfo.chooseWeekTime"}})],1)],1)],1),o("a-modal",{attrs:{title:"Shop Detail",width:800},on:{ok:e.sureSetProportion},model:{value:e.infoVisible,callback:function(t){e.infoVisible=t},expression:"infoVisible"}},[o("a-form",{attrs:{form:e.proportionInfo}},[o("a-form-item",{attrs:{"label-col":e.labelCol,"wrapper-col":e.wrapperCol,label:"StationName"}},[o("span",[e._v(e._s(e.proportionInfo.stationName))])]),o("a-form-item",{attrs:{"label-col":e.labelCol,"wrapper-col":e.wrapperCol,label:"Proportion"}},[o("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["proportion",{rules:[{required:!0,message:"Please input proportion"}],initialValue:e.proportionInfo.proportion}],expression:"['proportion', { rules: [{ required: true, message: 'Please input proportion' }], initialValue: proportionInfo.proportion }]"}]})],1),o("a-form-item",{attrs:{"label-col":e.labelCol,"wrapper-col":e.wrapperCol,label:"WeekTime"}},[o("el-date-picker",{staticClass:"value-info",staticStyle:{width:"280px",height:"40px","margin-left":"15px"},attrs:{type:"week",placeholder:"choose a week",format:"yyyy-MM-dd","value-format":"yyyy-MM-ddT00:00:00+08:00"},model:{value:e.proportionInfo.chooseWeekTime,callback:function(t){e.$set(e.proportionInfo,"chooseWeekTime",t)},expression:"proportionInfo.chooseWeekTime"}})],1)],1)],1)],1)},a=[],i=o("2af9"),s=o("39f0"),r=i["b"].Item,l={name:"ExamList",components:{STable:i["e"],Ellipsis:i["c"],DescriptionList:i["b"],DescriptionListItem:r,Category:i["a"]},data:function(){return{labelCol:{lg:{span:4},sm:{span:4}},wrapperCol:{lg:{span:8},sm:{span:15}},proportionInfo:{stationName:"",proportion:"",chooseWeekTime:""},sendEmailInfo:{shopName:"",shopId:"",chooseWeekTime:""},visible:!1,infoVisible:!1,mdl:{},queryParam:{},columns:[{title:"shop_name",dataIndex:"shop_name"},{title:"admin_email",dataIndex:"admin_email"},{title:"admin_name",dataIndex:"admin_name"},{title:"last_send_email_time",dataIndex:"last_send_email_time",scopedSlots:{customRender:"last_send_email_time"}},{title:"months_of_afq_rent",dataIndex:"months_of_afq_rent",scopedSlots:{customRender:"months_of_afq_rent"}},{title:"rent_per_year",dataIndex:"rent_per_year"},{title:"station_name",dataIndex:"station_name"},{title:"created_time",dataIndex:"created_at",scopedSlots:{customRender:"created_at"}},{title:"操作",dataIndex:"action",scopedSlots:{customRender:"action"}}],loadData:function(e){return Object(s["a"])().then((function(e){return console.log("goooooood12345789",e.Shops),e.Shops}))}}},methods:{sureSetProportion:function(){var e=this,t={station_name:this.proportionInfo.stationName,proportion:1e4,week_time:this.proportionInfo.chooseWeekTime};Object(s["d"])(t).then((function(t){t&&(e.$message.success("Set Proportion Suc"),e.infoVisible=!1)}))},sureSendEmail:function(){var e=this,t={shop_id:this.sendEmailInfo.shopId,week_time:this.sendEmailInfo.chooseWeekTime};Object(s["c"])(t).then((function(t){t&&(e.$message.success("Send Email Suc"),e.visible=!1)}))},checkDetail:function(e){e.shop_id;this.$router.push({path:"/exams/".concat(e.shop_id,"/shopdetail")})},sendEmail:function(e){this.sendEmailInfo.shopName=e.shop_name,this.sendEmailInfo.shopId=e.shop_id,this.sendEmailInfo.chooseWeekTime="",this.visible=!0},setProportion:function(e){this.proportionInfo.stationName=e.station_name,this.proportionInfo.proportion="",this.proportionInfo.chooseWeekTime="",this.infoVisible=!0},categoryManage:function(){this.$router.push({name:"ExamCategory"})},handleAdd:function(){this.$router.push({name:"AddExam"})},handleInfo:function(e){this.mdl=e,this.infoVisible=!0},handleEdit:function(e){this.$router.push({name:"EditExam",params:{id:e.eid}})},handleDel:function(e){var t=this;this.$confirm({title:"警告",content:"真的要删除吗?",okText:"删除",okType:"danger",cancelText:"取消",onOk:function(){deleteExam(e.eid).then((function(e){0===e.code?(t.$refs.table.refresh(!0),t.$message.success("删除成功")):t.$message.error("删除失败")}))},onCancel:function(){console.log("Cancel")}})},recommend:function(e){var t=this;updateExam(e.eid,{is_recommend:1}).then((function(e){0===e.code&&(t.$message.success("设置成功"),t.$refs.table.refresh(!0))}))},cancelRecommend:function(e){var t=this;updateExam(e.eid,{is_recommend:0}).then((function(e){0===e.code&&(t.$message.success("设置成功"),t.$refs.table.refresh(!0))}))}},watch:{$route:function(){this.$refs.table.refresh(!0)}}},c=l,m=o("2877"),p=Object(m["a"])(c,n,a,!1,null,"3a2ff9bc",null);t["default"]=p.exports},"39f0":function(e,t,o){"use strict";o.d(t,"b",(function(){return a})),o.d(t,"d",(function(){return i})),o.d(t,"c",(function(){return s})),o.d(t,"a",(function(){return r}));var n=o("b775");function a(){return Object(n["b"])({url:"/admin/station_list",method:"get",withCredentials:!0})}function i(e){return Object(n["b"])({url:"/admin/set_station_flow_proportion",method:"post",data:e})}function s(e){return Object(n["b"])({url:"/admin/send_notice",method:"post",data:e})}function r(e){return Object(n["b"])({url:"/admin/shop_list",method:"get",params:e})}}}]);
//# sourceMappingURL=chunk-2cbceaac.b5cd0463.js.map