(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-1973c006"],{"39f0":function(e,o,t){"use strict";t.d(o,"b",(function(){return i})),t.d(o,"d",(function(){return a})),t.d(o,"c",(function(){return r})),t.d(o,"a",(function(){return s}));var n=t("b775");function i(){return Object(n["b"])({url:"/admin/station_list",method:"get",withCredentials:!0})}function a(e){return Object(n["b"])({url:"/admin/set_station_flow_proportion",method:"post",data:e})}function r(e){return Object(n["b"])({url:"/admin/send_notice",method:"post",data:e})}function s(e){return Object(n["b"])({url:"/admin/shop_list",method:"get",params:e})}},"44e8":function(e,o,t){"use strict";t.r(o);var n=function(){var e=this,o=e.$createElement,t=e._self._c||o;return t("a-card",{attrs:{bordered:!1}},[t("s-table",{ref:"table",attrs:{size:"default","row-key":function(e){return e.eid},columns:e.columns,data:e.loadData,showPagination:!1},scopedSlots:e._u([{key:"price",fn:function(o){return[e._v(e._s(e._f("PriceFormat")(o)))]}},{key:"content",fn:function(o){return[t("ellipsis",{attrs:{length:30,tooltip:""}},[e._v(e._s(o))])]}},{key:"create_time",fn:function(o){return[e._v(e._s(e._f("DateFormat")(1e3*o,"YYYY-MM-DD HH:mm"))+"\n        ")]}},{key:"action",fn:function(o,n){return t("span",{},[[t("div",[t("a",{on:{click:function(o){return e.setProportion(n)}}},[e._v("set_station_flow_proportion")])])]],2)}}])}),t("a-modal",{attrs:{title:"SendEmail",width:600},on:{ok:e.sureSendEmail},model:{value:e.visible,callback:function(o){e.visible=o},expression:"visible"}},[t("a-form",{attrs:{form:e.sendEmailInfo}},[t("a-form-item",{attrs:{"label-col":e.labelCol,"wrapper-col":e.wrapperCol,label:"ShopName"}},[t("span",[e._v(e._s(e.sendEmailInfo.shopName))])]),t("a-form-item",{attrs:{"label-col":e.labelCol,"wrapper-col":e.wrapperCol,label:"WeekTime"}},[t("el-date-picker",{staticClass:"value-info",staticStyle:{width:"280px",height:"40px","margin-left":"15px"},attrs:{type:"week",placeholder:"choose a week",format:"yyyy-MM-dd","value-format":"yyyy-MM-ddT00:00:00+08:00"},model:{value:e.sendEmailInfo.chooseWeekTime,callback:function(o){e.$set(e.sendEmailInfo,"chooseWeekTime",o)},expression:"sendEmailInfo.chooseWeekTime"}})],1)],1)],1),t("a-modal",{attrs:{title:"Set Proportion",width:600},on:{ok:e.sureSetProportion},model:{value:e.infoVisible,callback:function(o){e.infoVisible=o},expression:"infoVisible"}},[t("a-form",{attrs:{form:e.proportionInfo}},[t("a-form-item",{attrs:{"label-col":e.labelCol,"wrapper-col":e.wrapperCol,label:"StationName"}},[t("span",{staticStyle:{"margin-left":"20px"}},[e._v(e._s(e.proportionInfo.stationName))])]),t("a-form-item",{attrs:{"label-col":e.labelCol,"wrapper-col":e.wrapperCol,label:"Proportion"}},[t("a-input",{staticStyle:{"margin-left":"18px"},model:{value:e.proportionInfo.proportion,callback:function(o){e.$set(e.proportionInfo,"proportion",o)},expression:"proportionInfo.proportion"}})],1),t("a-form-item",{attrs:{"label-col":e.labelCol,"wrapper-col":e.wrapperCol,label:"WeekTime"}},[t("el-date-picker",{staticClass:"value-info",staticStyle:{width:"280px",height:"40px","margin-left":"15px"},attrs:{type:"week",placeholder:"choose a week",format:"yyyy-MM-dd","value-format":"yyyy-MM-ddT00:00:00+08:00"},model:{value:e.proportionInfo.chooseWeekTime,callback:function(o){e.$set(e.proportionInfo,"chooseWeekTime",o)},expression:"proportionInfo.chooseWeekTime"}})],1)],1)],1)],1)},i=[],a=(t("7f7f"),t("2af9")),r=t("39f0"),s=a["b"].Item,l={name:"ExamList",components:{STable:a["e"],Ellipsis:a["c"],DescriptionList:a["b"],DescriptionListItem:s,Category:a["a"]},data:function(){return{labelCol:{lg:{span:4},sm:{span:4}},wrapperCol:{lg:{span:8},sm:{span:15}},proportionInfo:{stationName:"",proportion:"",chooseWeekTime:""},sendEmailInfo:{shopName:"",shopId:"",chooseWeekTime:""},visible:!1,infoVisible:!1,mdl:{},queryParam:{},columns:[{title:"ID",dataIndex:"id"},{title:"station_name",dataIndex:"name"},{title:"created_at",dataIndex:"created_at"},{title:"操作",dataIndex:"action",scopedSlots:{customRender:"action"}}],loadData:function(e){return Object(r["b"])().then((function(e){return e.Stations}))}}},methods:{sureSetProportion:function(){var e=this;if(0!=this.proportionInfo.proportion.length)if(0!=this.proportionInfo.chooseWeekTime.length){var o={station_name:this.proportionInfo.stationName,proportion:this.proportionInfo.proportion,week_time:this.proportionInfo.chooseWeekTime};Object(r["d"])(o).then((function(o){o&&(e.$message.success("Set Proportion Suc"),e.infoVisible=!1)}),(function(o){console.log(o),e.$message.success("Erro")}))}else this.$message.error("please choose weektime");else this.$message.error("please input proportion")},sureSendEmail:function(){var e=this,o={shop_id:this.sendEmailInfo.shopId,week_time:this.sendEmailInfo.chooseWeekTime};Object(r["c"])(o).then((function(o){o&&(e.$message.success("Send Email Suc"),e.visible=!1)}))},checkDetail:function(e){e.shop_id;this.$router.push({path:"/exams/".concat(e.shop_id,"/shopdetail")})},sendEmail:function(e){this.sendEmailInfo.shopName=e.shop_name,this.sendEmailInfo.shopId=e.shop_id,this.sendEmailInfo.chooseWeekTime="",this.visible=!0},setProportion:function(e){this.proportionInfo.stationName=e.name,this.proportionInfo.proportion="",this.proportionInfo.chooseWeekTime="",this.infoVisible=!0},categoryManage:function(){this.$router.push({name:"ExamCategory"})},handleAdd:function(){this.$router.push({name:"AddExam"})},handleInfo:function(e){this.mdl=e,this.infoVisible=!0},handleEdit:function(e){this.$router.push({name:"EditExam",params:{id:e.eid}})},handleDel:function(e){var o=this;this.$confirm({title:"警告",content:"真的要删除吗?",okText:"删除",okType:"danger",cancelText:"取消",onOk:function(){deleteExam(e.eid).then((function(e){0===e.code?(o.$refs.table.refresh(!0),o.$message.success("删除成功")):o.$message.error("删除失败")}))},onCancel:function(){console.log("Cancel")}})},recommend:function(e){var o=this;updateExam(e.eid,{is_recommend:1}).then((function(e){0===e.code&&(o.$message.success("设置成功"),o.$refs.table.refresh(!0))}))},cancelRecommend:function(e){var o=this;updateExam(e.eid,{is_recommend:0}).then((function(e){0===e.code&&(o.$message.success("设置成功"),o.$refs.table.refresh(!0))}))}},watch:{$route:function(){this.$refs.table.refresh(!0)}}},c=l,p=t("2877"),m=Object(p["a"])(c,n,i,!1,null,"4fd883ee",null);o["default"]=m.exports}}]);
//# sourceMappingURL=chunk-1973c006.4eee3c09.js.map